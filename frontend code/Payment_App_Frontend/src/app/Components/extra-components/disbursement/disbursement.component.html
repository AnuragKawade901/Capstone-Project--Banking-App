<div class="mt-4 px-3 w-100" style="background: #E6FAF7; border-radius: 13px;">
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb mb-0" style="background: #D0F8F4; border-radius: 9px;">
      <li class="breadcrumb-item">
        <a [routerLink]="role === 'CLIENT_USER' ? '/client/home' : role === 'BANK_USER' ? '/bank/home' : '/admin/home'"
           style="color: #00BCC2; font-weight: 700;">Home</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page" style="color: #FF8559;">Salary Disbursements</li>
    </ol>
  </nav>

  <!-- Summary cards -->
  <div class="d-flex gap-3 flex-wrap mb-3">
    <div class="p-3 rounded border w-100" style="background: #D0F8F4; max-width: 220px; border: 1.5px solid #A7F7CE;">
      <div class="small" style="color: #23C9AE;">Total Disbursements</div>
      <div class="fw-bold fs-5" style="color: #00BCC2;">â‚¹ {{ totalDisbursementAmount ?? 0 | number }}</div>
    </div>
    <div class="p-3 rounded border w-100" style="background: #D0F8F4; max-width: 220px; border: 1.5px solid #A7F7CE;">
      <div class="small" style="color: #23C9AE;">Pending</div>
      <div class="fw-bold fs-5" style="color: #FF8559;">{{ pending ?? 0 }}</div>
    </div>
    <div class="p-3 rounded border w-100" style="background: #D0F8F4; max-width: 220px; border: 1.5px solid #A7F7CE;">
      <div class="small" style="color: #23C9AE;">Approved</div>
      <div class="fw-bold fs-5" style="color: #23C9AE;">{{ approved ?? 0 }}</div>
    </div>
    <div class="p-3 rounded border w-100" style="background: #D0F8F4; max-width: 220px; border: 1.5px solid #A7F7CE;">
      <div class="small" style="color: #23C9AE;">Declined</div>
      <div class="fw-bold fs-5" style="color: #FF8559;">{{ declined ?? 0 }}</div>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="fw-bold mb-0" style="color:#00BCC2;">ALL SALARY DISBURSEMENTS</h5>
    <button *ngIf="role == 'CLIENT_USER'" class="btn btn-create-payment" routerLink="/client/employees"
      style="background: linear-gradient(90deg, #00BCC2 70%, #23C9AE 100%); color: #fff;">
      <i class="bi bi-plus-lg me-2"></i> Create Disbursement
    </button>
  </div>
  <hr style="border-top:2px solid #23c9ae;">

  <div class="mb-3 d-flex flex-wrap gap-2">
    <div ngbDropdown class="d-inline-block">
      <div class="mb-3 d-flex flex-wrap gap-2">
        <!-- All filter controls remain as before -->
      </div>
    </div>
    <!-- Disbursements Table -->
    <div class="table-wrapper rounded" style="overflow-x:auto; background: #D0F8F4; border-radius:13px; border:1.5px solid #A7F7CE;">
      <table class="table table-hover align-middle small mb-0" style="min-width: 1000px; background:#E6FAF7;">
        <thead style="background:#F1F6F5;">
          <tr>
            <th>#</th>
            <th>Client Name</th>
            <th>Total Amount</th>
            <th>Disbursement Date</th>
            <th>Status</th>
            <th>All Employees</th>
            <th>Count</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let disb of disbursements; let i=index">
            <td class="text-truncate">{{ i+1}}</td>
            <td class="text-truncate" style="max-width: 160px;">{{ disb.clientUser?.userName }}</td>
            <td class="text-truncate">{{ disb.totalAmount | currency:'INR' }}</td>
            <td class="text-truncate" style="max-width: 140px;">{{ disb.disbursementDate | date:'dd-MMM, h:mm a' }}</td>
            <td>
              <span class="badge rounded-pill" style="background: linear-gradient(90deg, #23c9ae 70%, #00bcc2 100%); color:#fff;">
                {{ disb.disbursementStatusId | paymentStatus}}
              </span>
            </td>
            <td>
              <span [ngClass]="disb.allEmployees ? 'text-success' : 'text-muted'" style="color: {{disb.allEmployees ? '#23C9AE' : '#A7F7CE'}};">
                {{ disb.allEmployees ? 'Yes' : 'No' }}
              </span>
            </td>
            <td>{{ disb.employees?.length || disb.disbursementDetails?.length || "-" }}</td>
            <td>
              <button *ngIf="disb.disbursementStatusId == 3 && role == 'BANK_USER'"
                      class="btn btn-sm btn-outline-dark me-1"
                      style="color:#00bcc2; border-color:#23c9ae;"
                      (click)="approveDisbursement(disb)">Approve</button>
              <button *ngIf="disb.disbursementStatusId == 3 && role == 'BANK_USER'"
                      class="btn btn-sm btn-outline-danger me-1" (click)="openFormModal(disb)">Reject</button>
              <button class="btn btn-sm btn-outline-dark"
                      [routerLink]="role === 'CLIENT_USER' ? ['/client/disbursements', disb.salaryDisbursementId] : ['/bank/disbursements', disb.salaryDisbursementId]"
                      style="color:#00bcc2; border-color:#23c9ae;">View</button>
            </td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="disbursements?.length === 0" class="text-center p-3" style="color:#FF8559;">
        No Salary Disbursement found.
      </div>
    </div>
  </div>
</div>
<app-reject-modal #rejectModal [Parentid]="selectedDisbursement?.id"
    (formSubmit)="handleFormSubmit($event)"></app-reject-modal>
